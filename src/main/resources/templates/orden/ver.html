<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Ver Orden</title>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<!-- Header reutilizable -->
<div th:replace="~{fragments/header :: menu}"></div>
<div class="container py-4">

  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3 class="mb-0">Detalle de Orden</h3>
    <a class="btn btn-secondary" th:href="@{/orden}">Volver</a>
  </div>

  <div class="card shadow-sm">
    <div class="card-body">

      <p><b>Empresa:</b> <span th:text="${orden.obra.empresa.nombre}"></span></p>
      <p><b>Obra:</b> <span th:text="${orden.obra.nombre}"></span></p>

      <p><b>Orden:</b>
        <span th:text="${orden.tipoOrden + '-' + orden.numeroOrden}"></span>
      </p>

      <p><b>Fecha:</b> <span th:text="${orden.fechaOrden}"></span></p>
      <p><b>Monto total:</b> <span th:text="${orden.montoTotal}"></span></p>

      <p><b>Usa valorización:</b>
        <span th:text="${orden.usaValorizacion ? 'SÍ' : 'NO'}"></span>
      </p>

      <!-- ✅ FIX: estadoOrden no existe, tu entity usa estadoProceso -->
      <p><b>Estado:</b> <span th:text="${orden.estadoProceso}"></span></p>

      <hr>

      <!-- ✅ FIX: referencia no existe, tu entity usa numeroCotizacionRef -->
      <p><b>Cotización referencial:</b>
        <span th:text="${orden.numeroCotizacionRef != null ? orden.numeroCotizacionRef : '-'}"></span>
      </p>

      <p><b>Descripción:</b></p>
      <div class="border rounded p-2 bg-white"
           th:text="${orden.descripcion != null && !#strings.isEmpty(orden.descripcion) ? orden.descripcion : '-'}"></div>

    </div>
  </div>

</div>
</body>
</html>